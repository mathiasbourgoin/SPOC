<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sarek_lower (sarek.Sarek_ppx_lib.Sarek_lower)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sarek</a> &#x00BB; <a href="../index.html">Sarek_ppx_lib</a> &#x00BB; Sarek_lower</nav><header class="odoc-preamble"><h1>Module <code><span>Sarek_ppx_lib.Sarek_lower</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-mangle_type_name"><a href="#val-mangle_type_name" class="anchor"></a><code><span><span class="keyword">val</span> mangle_type_name : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-c_type_of_typ"><a href="#val-c_type_of_typ" class="anchor"></a><code><span><span class="keyword">val</span> c_type_of_typ : <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-record_constructor_strings"><a href="#val-record_constructor_strings" class="anchor"></a><code><span><span class="keyword">val</span> record_constructor_strings : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> * bool)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-variant_constructor_strings"><a href="#val-variant_constructor_strings" class="anchor"></a><code><span><span class="keyword">val</span> variant_constructor_strings : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(string * <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> option</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-c_type_of_core_type"><a href="#val-c_type_of_core_type" class="anchor"></a><code><span><span class="keyword">val</span> c_type_of_core_type : <span><span class="label">loc</span>:<span class="xref-unresolved">Ppxlib</span>.Location.t <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-typ_of_core_type"><a href="#val-typ_of_core_type" class="anchor"></a><code><span><span class="keyword">val</span> typ_of_core_type : 
  <span><span class="label">loc</span>:<span class="xref-unresolved">Ppxlib</span>.Location.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.core_type <span class="arrow">&#45;&gt;</span></span>
  <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-constructor_strings_of_core_type_decl"><a href="#val-constructor_strings_of_core_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> constructor_strings_of_core_type_decl : 
  <span><span class="label">loc</span>:<span class="xref-unresolved">Ppxlib</span>.Location.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Ppxlib</span>.type_declaration <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Ppxlib__</span>.Import.expression</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> state</span><span> = </span><span>{</span></code><ol><li id="type-state.next_var_id" class="def record field anchored"><a href="#type-state.next_var_id" class="anchor"></a><code><span><span class="keyword">mutable</span> next_var_id : int;</span></code></li><li id="type-state.declarations" class="def record field anchored"><a href="#type-state.declarations" class="anchor"></a><code><span><span class="keyword">mutable</span> declarations : <span><a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a> list</span>;</span></code></li><li id="type-state.fun_map" class="def record field anchored"><a href="#type-state.fun_map" class="anchor"></a><code><span>fun_map : <span><span>(string, <span><a href="../Sarek_typed_ast/index.html#type-tparam">Sarek_typed_ast.tparam</a> list</span> * <a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a>)</span>
            <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>;</span></code></li><li id="type-state.lowering_stack" class="def record field anchored"><a href="#type-state.lowering_stack" class="anchor"></a><code><span>lowering_stack : <span><span>(string, unit)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>;</span></code></li><li id="type-state.lowered_funs" class="def record field anchored"><a href="#type-state.lowered_funs" class="anchor"></a><code><span>lowered_funs : <span><span>(string, <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a> * string)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Lowering state</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_state"><a href="#val-create_state" class="anchor"></a><code><span><span class="keyword">val</span> create_state : 
  <span><span><span>(string, <span><a href="../Sarek_typed_ast/index.html#type-tparam">Sarek_typed_ast.tparam</a> list</span> * <a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a>)</span>
    <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fresh_id"><a href="#val-fresh_id" class="anchor"></a><code><span><span class="keyword">val</span> fresh_id : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Generate a fresh variable ID</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_memspace"><a href="#val-lower_memspace" class="anchor"></a><code><span><span class="keyword">val</span> lower_memspace : <span><a href="../Sarek_types/index.html#type-memspace">Sarek_types.memspace</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-memspace">Kirc_Ast.memspace</a></span></code></div><div class="spec-doc"><p>Convert memspace to Kirc_Ast memspace</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_prim_elttype"><a href="#val-lower_prim_elttype" class="anchor"></a><code><span><span class="keyword">val</span> lower_prim_elttype : <span><a href="../Sarek_types/index.html#type-prim_type">Sarek_types.prim_type</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-elttype">Kirc_Ast.elttype</a></span></code></div><div class="spec-doc"><p>Convert prim_type to Kirc_Ast elttype</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_reg_elttype"><a href="#val-lower_reg_elttype" class="anchor"></a><code><span><span class="keyword">val</span> lower_reg_elttype : <span><a href="../Sarek_types/index.html#type-registered_type">Sarek_types.registered_type</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-elttype">Kirc_Ast.elttype</a></span></code></div><div class="spec-doc"><p>Convert registered type to Kirc_Ast elttype</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elttype_of_typ"><a href="#val-elttype_of_typ" class="anchor"></a><code><span><span class="keyword">val</span> elttype_of_typ : <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-elttype">Kirc_Ast.elttype</a></span></code></div><div class="spec-doc"><p>Get element type from a typ</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_expr"><a href="#val-lower_expr" class="anchor"></a><code><span><span class="keyword">val</span> lower_expr : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a typed expression to Kirc_Ast</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_decl"><a href="#val-lower_decl" class="anchor"></a><code><span><span class="keyword">val</span> lower_decl : 
  <span><span class="label">mutable_</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a declaration for a local/kernel variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_ref"><a href="#val-lower_ref" class="anchor"></a><code><span><span class="keyword">val</span> lower_ref : <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a reference to a previously-declared variable.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_binop"><a href="#val-lower_binop" class="anchor"></a><code><span><span class="keyword">val</span> lower_binop : 
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_ast/index.html#type-binop">Sarek_ast.binop</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower binary operation based on operand types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_unop"><a href="#val-lower_unop" class="anchor"></a><code><span><span class="keyword">val</span> lower_unop : 
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_ast/index.html#type-unop">Sarek_ast.unop</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower unary operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_seq"><a href="#val-lower_seq" class="anchor"></a><code><span><span class="keyword">val</span> lower_seq : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a sequence of expressions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_match"><a href="#val-lower_match" class="anchor"></a><code><span><span class="keyword">val</span> lower_match : 
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../Sarek_typed_ast/index.html#type-tpattern">Sarek_typed_ast.tpattern</a> * <a href="../Sarek_typed_ast/index.html#type-texpr">Sarek_typed_ast.texpr</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a match expression</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_param"><a href="#val-lower_param" class="anchor"></a><code><span><span class="keyword">val</span> lower_param : <span><a href="../Sarek_typed_ast/index.html#type-tparam">Sarek_typed_ast.tparam</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower a kernel parameter to IR</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_params"><a href="#val-lower_params" class="anchor"></a><code><span><span class="keyword">val</span> lower_params : <span><span><a href="../Sarek_typed_ast/index.html#type-tparam">Sarek_typed_ast.tparam</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Lower kernel parameters to IR params</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_kernel"><a href="#val-lower_kernel" class="anchor"></a><code><span><span class="keyword">val</span> lower_kernel : <span><a href="../Sarek_typed_ast/index.html#type-tkernel">Sarek_typed_ast.tkernel</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a> * <span>string list</span></span></code></div><div class="spec-doc"><p>Lower a complete kernel</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lower_return_value"><a href="#val-lower_return_value" class="anchor"></a><code><span><span class="keyword">val</span> lower_return_value : <span><a href="../Sarek_typed_ast/index.html#type-tkernel">Sarek_typed_ast.tkernel</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Kirc_Ast/index.html#type-k_ext">Kirc_Ast.k_ext</a></span></code></div><div class="spec-doc"><p>Get the return value IR from a kernel</p></div></div></div></body></html>
