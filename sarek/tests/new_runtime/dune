; Tests for the GPU runtime
; Legacy SPOC tests have been moved to *.spoc_legacy files

(executable
 (name test_native_runtime)
 (modules test_native_runtime)
 (libraries sarek sarek.stdlib spoc_core sarek_native unix)
 (preprocess
  (pps sarek_ppx)))

(executable
 (name test_runtime_comparison)
 (modules test_runtime_comparison)
 (libraries sarek sarek.stdlib spoc_core sarek_cuda sarek_opencl unix)
 (preprocess
  (pps sarek_ppx))
 (enabled_if
  (<> %{env:CUDA_PATH=} ""))
 (flags
  (:standard -w -33 -ccopt -L/opt/cuda/lib64 -cclib -lnvrtc)))
