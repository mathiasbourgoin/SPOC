<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sarek_core_primitives (sarek.Sarek_ppx_lib.Sarek_core_primitives)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sarek</a> &#x00BB; <a href="../index.html">Sarek_ppx_lib</a> &#x00BB; Sarek_core_primitives</nav><header class="odoc-preamble"><h1>Module <code><span>Sarek_ppx_lib.Sarek_core_primitives</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-variance"><a href="#type-variance" class="anchor"></a><code><span><span class="keyword">type</span> variance</span><span> = </span></code><ol><li id="type-variance.Uniform" class="def variant constructor anchored"><a href="#type-variance.Uniform" class="anchor"></a><code><span>| </span><span><span class="constructor">Uniform</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Same value for all threads in grid</p><span class="comment-delim">*)</span></div></li><li id="type-variance.BlockVarying" class="def variant constructor anchored"><a href="#type-variance.BlockVarying" class="anchor"></a><code><span>| </span><span><span class="constructor">BlockVarying</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Uniform within block, varies between blocks</p><span class="comment-delim">*)</span></div></li><li id="type-variance.WarpVarying" class="def variant constructor anchored"><a href="#type-variance.WarpVarying" class="anchor"></a><code><span>| </span><span><span class="constructor">WarpVarying</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Uniform within warp, varies between warps</p><span class="comment-delim">*)</span></div></li><li id="type-variance.ThreadVarying" class="def variant constructor anchored"><a href="#type-variance.ThreadVarying" class="anchor"></a><code><span>| </span><span><span class="constructor">ThreadVarying</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Varies per thread</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Variance levels in the GPU execution model. Forms a lattice: Uniform ≤ BlockVarying ≤ WarpVarying ≤ ThreadVarying</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-convergence"><a href="#type-convergence" class="anchor"></a><code><span><span class="keyword">type</span> convergence</span><span> = </span></code><ol><li id="type-convergence.NoEffect" class="def variant constructor anchored"><a href="#type-convergence.NoEffect" class="anchor"></a><code><span>| </span><span><span class="constructor">NoEffect</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Does not affect convergence</p><span class="comment-delim">*)</span></div></li><li id="type-convergence.ConvergencePoint" class="def variant constructor anchored"><a href="#type-convergence.ConvergencePoint" class="anchor"></a><code><span>| </span><span><span class="constructor">ConvergencePoint</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>All workgroup threads must reach together</p><span class="comment-delim">*)</span></div></li><li id="type-convergence.WarpConvergence" class="def variant constructor anchored"><a href="#type-convergence.WarpConvergence" class="anchor"></a><code><span>| </span><span><span class="constructor">WarpConvergence</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>All warp threads must reach together</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Convergence requirements for synchronization primitives</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-purity"><a href="#type-purity" class="anchor"></a><code><span><span class="keyword">type</span> purity</span><span> = </span></code><ol><li id="type-purity.Pure" class="def variant constructor anchored"><a href="#type-purity.Pure" class="anchor"></a><code><span>| </span><span><span class="constructor">Pure</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>No side effects, can CSE/DCE</p><span class="comment-delim">*)</span></div></li><li id="type-purity.Impure" class="def variant constructor anchored"><a href="#type-purity.Impure" class="anchor"></a><code><span>| </span><span><span class="constructor">Impure</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Has side effects</p><span class="comment-delim">*)</span></div></li><li id="type-purity.Atomic" class="def variant constructor anchored"><a href="#type-purity.Atomic" class="anchor"></a><code><span>| </span><span><span class="constructor">Atomic</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Atomic memory operation</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Purity classification for optimization</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-primitive"><a href="#type-primitive" class="anchor"></a><code><span><span class="keyword">type</span> primitive</span><span> = </span><span>{</span></code><ol><li id="type-primitive.name" class="def record field anchored"><a href="#type-primitive.name" class="anchor"></a><code><span>name : string;</span></code></li><li id="type-primitive.typ" class="def record field anchored"><a href="#type-primitive.typ" class="anchor"></a><code><span>typ : <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a>;</span></code></li><li id="type-primitive.variance" class="def record field anchored"><a href="#type-primitive.variance" class="anchor"></a><code><span>variance : <a href="#type-variance">variance</a>;</span></code></li><li id="type-primitive.convergence" class="def record field anchored"><a href="#type-primitive.convergence" class="anchor"></a><code><span>convergence : <a href="#type-convergence">convergence</a>;</span></code></li><li id="type-primitive.purity" class="def record field anchored"><a href="#type-primitive.purity" class="anchor"></a><code><span>purity : <a href="#type-purity">purity</a>;</span></code></li><li id="type-primitive.category" class="def record field anchored"><a href="#type-primitive.category" class="anchor"></a><code><span>category : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>For documentation/grouping</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A core primitive definition with compile-time semantics</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-primitives"><a href="#val-primitives" class="anchor"></a><code><span><span class="keyword">val</span> primitives : <span><a href="#type-primitive">primitive</a> list</span></span></code></div><div class="spec-doc"><p>All registered core primitives</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find"><a href="#val-find" class="anchor"></a><code><span><span class="keyword">val</span> find : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-primitive">primitive</a> option</span></span></code></div><div class="spec-doc"><p>Lookup a primitive by name</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_exn"><a href="#val-find_exn" class="anchor"></a><code><span><span class="keyword">val</span> find_exn : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-primitive">primitive</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_core_primitive"><a href="#val-is_core_primitive" class="anchor"></a><code><span><span class="keyword">val</span> is_core_primitive : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Predicates</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_thread_varying"><a href="#val-is_thread_varying" class="anchor"></a><code><span><span class="keyword">val</span> is_thread_varying : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_warp_varying"><a href="#val-is_warp_varying" class="anchor"></a><code><span><span class="keyword">val</span> is_warp_varying : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a primitive has warp-level or finer variance (WarpVarying or ThreadVarying)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_convergence_point"><a href="#val-is_convergence_point" class="anchor"></a><code><span><span class="keyword">val</span> is_convergence_point : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_warp_convergence_point"><a href="#val-is_warp_convergence_point" class="anchor"></a><code><span><span class="keyword">val</span> is_warp_convergence_point : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a primitive requires warp-level convergence</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-requires_convergence"><a href="#val-requires_convergence" class="anchor"></a><code><span><span class="keyword">val</span> requires_convergence : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a primitive requires any convergence (block or warp level)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_pure"><a href="#val-is_pure" class="anchor"></a><code><span><span class="keyword">val</span> is_pure : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_atomic"><a href="#val-is_atomic" class="anchor"></a><code><span><span class="keyword">val</span> is_atomic : <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a primitive is an atomic memory operation</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-variance_of"><a href="#val-variance_of" class="anchor"></a><code><span><span class="keyword">val</span> variance_of : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-variance">variance</a> option</span></span></code></div><div class="spec-doc"><p>Get variance of a named primitive</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-join_variance"><a href="#val-join_variance" class="anchor"></a><code><span><span class="keyword">val</span> join_variance : <span><a href="#type-variance">variance</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-variance">variance</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-variance">variance</a></span></code></div><div class="spec-doc"><p>Variance lattice operations</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-variance_leq"><a href="#val-variance_leq" class="anchor"></a><code><span><span class="keyword">val</span> variance_leq : <span><a href="#type-variance">variance</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-variance">variance</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-primitives_in_category"><a href="#val-primitives_in_category" class="anchor"></a><code><span><span class="keyword">val</span> primitives_in_category : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-primitive">primitive</a> list</span></span></code></div><div class="spec-doc"><p>Get all primitives in a category</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_variance"><a href="#val-pp_variance" class="anchor"></a><code><span><span class="keyword">val</span> pp_variance : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-variance">variance</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Pretty printing</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_convergence"><a href="#val-pp_convergence" class="anchor"></a><code><span><span class="keyword">val</span> pp_convergence : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-convergence">convergence</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_purity"><a href="#val-pp_purity" class="anchor"></a><code><span><span class="keyword">val</span> pp_purity : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-purity">purity</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_primitive"><a href="#val-pp_primitive" class="anchor"></a><code><span><span class="keyword">val</span> pp_primitive : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-primitive">primitive</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>
