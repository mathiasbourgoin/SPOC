<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sarek_scheme (sarek.Sarek_ppx_lib.Sarek_scheme)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sarek</a> &#x00BB; <a href="../index.html">Sarek_ppx_lib</a> &#x00BB; Sarek_scheme</nav><header class="odoc-preamble"><h1>Module <code><span>Sarek_ppx_lib.Sarek_scheme</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#type-schemes">Type Schemes</a></li><li><a href="#free-type-variables">Free Type Variables</a></li><li><a href="#generalization">Generalization</a></li><li><a href="#instantiation">Instantiation</a></li><li><a href="#pretty-printing">Pretty Printing</a></li><li><a href="#scheme-utilities">Scheme Utilities</a></li></ul></nav></div><div class="odoc-content"><h2 id="type-schemes"><a href="#type-schemes" class="anchor"></a>Type Schemes</h2><div class="odoc-spec"><div class="spec type anchored" id="type-scheme"><a href="#type-scheme" class="anchor"></a><code><span><span class="keyword">type</span> scheme</span><span> = </span><span>{</span></code><ol><li id="type-scheme.quantified" class="def record field anchored"><a href="#type-scheme.quantified" class="anchor"></a><code><span>quantified : <span>int list</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>IDs of generalized (forall-bound) type variables</p><span class="comment-delim">*)</span></div></li><li id="type-scheme.body" class="def record field anchored"><a href="#type-scheme.body" class="anchor"></a><code><span>body : <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>The type body with those variables</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A type scheme represents a polymorphic type with quantified type variables. For example, the identity function has scheme: forall a. a -&gt; a</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mono"><a href="#val-mono" class="anchor"></a><code><span><span class="keyword">val</span> mono : <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-scheme">scheme</a></span></code></div><div class="spec-doc"><p>Create a monomorphic scheme (no quantified variables)</p></div></div><h2 id="free-type-variables"><a href="#free-type-variables" class="anchor"></a>Free Type Variables</h2><div class="odoc-spec"><div class="spec value anchored" id="val-free_tvars"><a href="#val-free_tvars" class="anchor"></a><code><span><span class="keyword">val</span> free_tvars : <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Collect all free (unbound) type variable IDs in a type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unique"><a href="#val-unique" class="anchor"></a><code><span><span class="keyword">val</span> unique : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Remove duplicates from a list</p></div></div><h2 id="generalization"><a href="#generalization" class="anchor"></a>Generalization</h2><div class="odoc-spec"><div class="spec value anchored" id="val-copy_for_scheme"><a href="#val-copy_for_scheme" class="anchor"></a><code><span><span class="keyword">val</span> copy_for_scheme : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> * <span>int list</span></span></code></div><div class="spec-doc"><p>Deep copy a type, creating fresh type variables with NEW ids for those that will be quantified. This ensures the scheme's body is completely independent of unification on the original or instantiated types.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generalize"><a href="#val-generalize" class="anchor"></a><code><span><span class="keyword">val</span> generalize : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-scheme">scheme</a></span></code></div><div class="spec-doc"><p>Generalize a type at a given level. Type variables at levels greater than the given level are quantified.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">level</span> <p>The current binding level (from the environment)</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">t</span> <p>The type to generalize</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A type scheme with free variables at higher levels quantified</p></li></ul></div></div><h2 id="instantiation"><a href="#instantiation" class="anchor"></a>Instantiation</h2><div class="odoc-spec"><div class="spec value anchored" id="val-instantiate"><a href="#val-instantiate" class="anchor"></a><code><span><span class="keyword">val</span> instantiate : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Sarek_types/index.html#type-typ">Sarek_types.typ</a></span></code></div><div class="spec-doc"><p>Instantiate a type scheme by replacing quantified variables with fresh ones.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">s</span> <p>The type scheme to instantiate</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A fresh type with all quantified variables replaced</p></li></ul></div></div><h2 id="pretty-printing"><a href="#pretty-printing" class="anchor"></a>Pretty Printing</h2><div class="odoc-spec"><div class="spec value anchored" id="val-pp_scheme"><a href="#val-pp_scheme" class="anchor"></a><code><span><span class="keyword">val</span> pp_scheme : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-scheme_to_string"><a href="#val-scheme_to_string" class="anchor"></a><code><span><span class="keyword">val</span> scheme_to_string : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><h2 id="scheme-utilities"><a href="#scheme-utilities" class="anchor"></a>Scheme Utilities</h2><div class="odoc-spec"><div class="spec value anchored" id="val-is_mono"><a href="#val-is_mono" class="anchor"></a><code><span><span class="keyword">val</span> is_mono : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a scheme is monomorphic (no quantified variables)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_poly"><a href="#val-is_poly" class="anchor"></a><code><span><span class="keyword">val</span> is_poly : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if a scheme is polymorphic (has quantified variables)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-function_arity"><a href="#val-function_arity" class="anchor"></a><code><span><span class="keyword">val</span> function_arity : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <span>int option</span></span></code></div><div class="spec-doc"><p>Get the arity of a function scheme</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-schemes_equivalent"><a href="#val-schemes_equivalent" class="anchor"></a><code><span><span class="keyword">val</span> schemes_equivalent : <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-scheme">scheme</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if two schemes are equivalent (up to alpha-renaming)</p></div></div></div></body></html>
