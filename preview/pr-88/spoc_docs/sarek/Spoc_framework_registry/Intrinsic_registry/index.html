<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Intrinsic_registry (sarek.Spoc_framework_registry.Intrinsic_registry)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sarek</a> &#x00BB; <a href="../index.html">Spoc_framework_registry</a> &#x00BB; Intrinsic_registry</nav><header class="odoc-preamble"><h1>Module <code><span>Spoc_framework_registry.Intrinsic_registry</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#standard-intrinsic-definitions">Standard Intrinsic Definitions</a></li><li><a href="#helper-functions">Helper Functions</a></li><li><a href="#intrinsic-validation">Intrinsic Validation</a></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-intrinsic_impl"><a href="#type-intrinsic_impl" class="anchor"></a><code><span><span class="keyword">type</span> intrinsic_impl</span><span> = </span><span>{</span></code><ol><li id="type-intrinsic_impl.intr_name" class="def record field anchored"><a href="#type-intrinsic_impl.intr_name" class="anchor"></a><code><span>intr_name : string;</span></code></li><li id="type-intrinsic_impl.intr_codegen" class="def record field anchored"><a href="#type-intrinsic_impl.intr_codegen" class="anchor"></a><code><span>intr_codegen : string;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Code to generate (simple string for now)</p><span class="comment-delim">*)</span></div></li><li id="type-intrinsic_impl.intr_convergence" class="def record field anchored"><a href="#type-intrinsic_impl.intr_convergence" class="anchor"></a><code><span>intr_convergence : <a href="../../../spoc/Spoc_framework/Framework_sig/index.html#type-convergence">Spoc_framework.Framework_sig.convergence</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Generic intrinsic implementation record. This is the concrete type used by backends; the module type INTRINSIC_REGISTRY uses an abstract type to allow flexibility.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span>
  () : 
  <a href="../../../spoc/Spoc_framework/Framework_sig/module-type-INTRINSIC_REGISTRY/index.html">Spoc_framework.Framework_sig.INTRINSIC_REGISTRY</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../spoc/Spoc_framework/Framework_sig/module-type-INTRINSIC_REGISTRY/index.html#type-intrinsic_impl">intrinsic_impl</a> = <a href="#type-intrinsic_impl">intrinsic_impl</a></span></span></code></div><div class="spec-doc"><p>Create an intrinsic registry for a specific backend. Each backend should create its own registry instance.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Global"><a href="#module-Global" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Global/index.html">Global</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Global registry that combines all backend registries. Used for intrinsic lookup when the backend is not yet known.</p></div></div><h2 id="standard-intrinsic-definitions"><a href="#standard-intrinsic-definitions" class="anchor"></a>Standard Intrinsic Definitions</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Thread_intrinsics"><a href="#module-Thread_intrinsics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Thread_intrinsics/index.html">Thread_intrinsics</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Thread indexing intrinsics - must be implemented by all GPU backends</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Sync_intrinsics"><a href="#module-Sync_intrinsics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Sync_intrinsics/index.html">Sync_intrinsics</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Synchronization intrinsics</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Atomic_intrinsics"><a href="#module-Atomic_intrinsics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Atomic_intrinsics/index.html">Atomic_intrinsics</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Atomic operation intrinsics</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Math_intrinsics"><a href="#module-Math_intrinsics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Math_intrinsics/index.html">Math_intrinsics</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Math intrinsics - typically map to hardware instructions</p></div></div><h2 id="helper-functions"><a href="#helper-functions" class="anchor"></a>Helper Functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-make_simple_intrinsic"><a href="#val-make_simple_intrinsic" class="anchor"></a><code><span><span class="keyword">val</span> make_simple_intrinsic : <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">codegen</span>:string <span class="arrow">&#45;&gt;</span></span> <a href="#type-intrinsic_impl">intrinsic_impl</a></span></code></div><div class="spec-doc"><p>Create a simple intrinsic that maps to a direct code string</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_sync_intrinsic"><a href="#val-make_sync_intrinsic" class="anchor"></a><code><span><span class="keyword">val</span> make_sync_intrinsic : <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">codegen</span>:string <span class="arrow">&#45;&gt;</span></span> <a href="#type-intrinsic_impl">intrinsic_impl</a></span></code></div><div class="spec-doc"><p>Create a synchronization intrinsic</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-make_divergent_intrinsic"><a href="#val-make_divergent_intrinsic" class="anchor"></a><code><span><span class="keyword">val</span> make_divergent_intrinsic : <span><span class="label">name</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">codegen</span>:string <span class="arrow">&#45;&gt;</span></span> <a href="#type-intrinsic_impl">intrinsic_impl</a></span></code></div><div class="spec-doc"><p>Create a divergent intrinsic (result varies per thread)</p></div></div><h2 id="intrinsic-validation"><a href="#intrinsic-validation" class="anchor"></a>Intrinsic Validation</h2><div class="odoc-spec"><div class="spec value anchored" id="val-is_safe_in_divergent_flow"><a href="#val-is_safe_in_divergent_flow" class="anchor"></a><code><span><span class="keyword">val</span> is_safe_in_divergent_flow : <span><a href="#type-intrinsic_impl">intrinsic_impl</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if an intrinsic is safe to call in divergent control flow</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-requires_uniform_execution"><a href="#val-requires_uniform_execution" class="anchor"></a><code><span><span class="keyword">val</span> requires_uniform_execution : <span><a href="#type-intrinsic_impl">intrinsic_impl</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if an intrinsic requires all threads to participate</p></div></div></div></body></html>
