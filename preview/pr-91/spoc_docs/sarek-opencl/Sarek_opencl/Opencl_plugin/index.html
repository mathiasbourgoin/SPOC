<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Opencl_plugin (sarek-opencl.Sarek_opencl.Opencl_plugin)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">sarek-opencl</a> &#x00BB; <a href="../index.html">Sarek_opencl</a> &#x00BB; Opencl_plugin</nav><header class="odoc-preamble"><h1>Module <code><span>Sarek_opencl.Opencl_plugin</span></code></h1></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#additional-opencl-specific-functions">Additional OpenCL-specific Functions</a></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Opencl_base"><a href="#module-Opencl_base" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Opencl_base/index.html">Opencl_base</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Reuse the existing OpenCL implementation</p></div></div><div class="odoc-spec"><div class="spec type extension anchored" id="extension-decl-Opencl_kargs"><a href="#extension-decl-Opencl_kargs" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../../../spoc/Spoc_framework/Framework_sig/index.html#type-kargs">Spoc_framework.Framework_sig.kargs</a> += </span></code><ol><li id="extension-Opencl_kargs" class="def variant extension anchored"><a href="#extension-Opencl_kargs" class="anchor"></a><code><span>| </span><span><span class="extension">Opencl_kargs</span> <span class="keyword">of</span> <a href="../Opencl_plugin_base/Opencl/Kernel/index.html#type-args">Opencl_base.Kernel.args</a></span></code></li></ol></div><div class="spec-doc"><p>Extend Framework_sig.kargs with OpenCL-specific variant</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-opencl_intrinsic"><a href="#type-opencl_intrinsic" class="anchor"></a><code><span><span class="keyword">type</span> opencl_intrinsic</span><span> = </span><span>{</span></code><ol><li id="type-opencl_intrinsic.intr_name" class="def record field anchored"><a href="#type-opencl_intrinsic.intr_name" class="anchor"></a><code><span>intr_name : string;</span></code></li><li id="type-opencl_intrinsic.intr_codegen" class="def record field anchored"><a href="#type-opencl_intrinsic.intr_codegen" class="anchor"></a><code><span>intr_codegen : string;</span></code></li><li id="type-opencl_intrinsic.intr_convergence" class="def record field anchored"><a href="#type-opencl_intrinsic.intr_convergence" class="anchor"></a><code><span>intr_convergence : <a href="../../../spoc/Spoc_framework/Framework_sig/index.html#type-convergence">Spoc_framework.Framework_sig.convergence</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>OpenCL-specific intrinsic implementation</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Opencl_intrinsics"><a href="#module-Opencl_intrinsics" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Opencl_intrinsics/index.html">Opencl_intrinsics</a></span><span> : <a href="../../../spoc/Spoc_framework/Framework_sig/module-type-INTRINSIC_REGISTRY/index.html">Spoc_framework.Framework_sig.INTRINSIC_REGISTRY</a></span></code></div><div class="spec-doc"><p>Intrinsic registry for OpenCL-specific intrinsics</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Backend"><a href="#module-Backend" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Backend/index.html">Backend</a></span><span> : <a href="../../../spoc/Spoc_framework/Framework_sig/module-type-BACKEND/index.html">Spoc_framework.Framework_sig.BACKEND</a></span></code></div><div class="spec-doc"><p>OpenCL Backend - implements BACKEND</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_disabled"><a href="#val-is_disabled" class="anchor"></a><code><span><span class="keyword">val</span> is_disabled : <span>unit <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Check if backend is disabled via environment variable. Checked at runtime to allow SPOC_DISABLE_* to work without rebuild.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-registered_backend"><a href="#val-registered_backend" class="anchor"></a><code><span><span class="keyword">val</span> registered_backend : <span>unit lazy_t</span></span></code></div><div class="spec-doc"><p>Backend registration - happens once when first needed</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-init"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Force module initialization</p></div></div><h2 id="additional-opencl-specific-functions"><a href="#additional-opencl-specific-functions" class="anchor"></a>Additional OpenCL-specific Functions</h2><div class="odoc-spec"><div class="spec value anchored" id="val-register_intrinsic"><a href="#val-register_intrinsic" class="anchor"></a><code><span><span class="keyword">val</span> register_intrinsic : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="Opencl_intrinsics/index.html#type-intrinsic_impl">Opencl_intrinsics.intrinsic_impl</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Register a custom OpenCL intrinsic</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-find_intrinsic"><a href="#val-find_intrinsic" class="anchor"></a><code><span><span class="keyword">val</span> find_intrinsic : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="Opencl_intrinsics/index.html#type-intrinsic_impl">Opencl_intrinsics.intrinsic_impl</a> option</span></span></code></div><div class="spec-doc"><p>Look up an OpenCL intrinsic</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_with_types"><a href="#val-generate_with_types" class="anchor"></a><code><span><span class="keyword">val</span> generate_with_types : 
  <span><span class="label">types</span>:<span><span>(string * <span><span>(string * <a href="../../../spoc/Sarek_ir_types/index.html#type-elttype">Sarek_ir_types.elttype</a>)</span> list</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../spoc/Sarek_ir_types/index.html#type-kernel">Sarek_ir_types.kernel</a> <span class="arrow">&#45;&gt;</span></span>
  string</span></code></div><div class="spec-doc"><p>Generate OpenCL source with custom types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_source"><a href="#val-generate_source" class="anchor"></a><code><span><span class="keyword">val</span> generate_source : <span><a href="../../../spoc/Sarek_ir_types/index.html#type-kernel">Sarek_ir_types.kernel</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Generate OpenCL source for a kernel</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_with_fp64"><a href="#val-generate_with_fp64" class="anchor"></a><code><span><span class="keyword">val</span> generate_with_fp64 : <span><a href="../../../spoc/Sarek_ir_types/index.html#type-kernel">Sarek_ir_types.kernel</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Generate OpenCL source with FP64 extension if needed</p></div></div></div></body></html>
